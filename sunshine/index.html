<!doctype html>
<html lang="en-GB">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Alex &amp; Sam — We’re engaged</title>
  <meta name="description" content="Alex &amp; Sam are engaged — Kyoto, Japan · 12 Aug 2025.">
  <link rel="canonical" href="https://yourdomain.com/engaged">
  <meta name="theme-color" content="#111111">

  <!-- Open Graph (Facebook-first) -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Alex &amp; Sam — We’re engaged">
  <meta property="og:description" content="Kyoto, Japan · 12 Aug 2025">
  <meta property="og:url" content="https://yourdomain.com/engaged">
  <meta property="og:site_name" content="Alex &amp; Sam">
  <meta property="og:locale" content="en_GB">
  <meta property="og:image" content="pen.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Engagement announcement for Alex &amp; Sam">

  <style>
    :root{
      --bg:#fff; --fg:#111; --muted:#6b6b6b; --ring:#000;
      --gap:0px;             /* space between items */
      --expander-max:160px;   /* expanded gap height */
      --radius:14px;
    }
    /* PATCH: NO-PAGE-SCROLL */
    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--fg);
      -webkit-font-smoothing:antialiased;
      overflow:hidden;            /* stop any vertical scroll / 1px gaps */
      overscroll-behavior:none;   /* prevent bounce on touch devices */
    }

    /* STEP-06 FIT-VIEWPORT */
/* PATCH-FRAME-EDGE */
    .frame{
      width:min(100vw, 133.333dvh);
      height:100dvh;
      margin-inline:auto;
      display:flex; align-items:center; justify-content:center;
      padding:0;                 /* was clamp(...) — remove white border */
      box-sizing:border-box;
    }


    .stack{
      width:100%;
      display:grid;
      grid-template-rows:auto auto auto; /* hero, expander, thumbs */
      gap:var(--gap);
    }

/* PATCH-TILE-EDGE */
    .hero, .thumb{
      border-radius:0;           /* remove rounded white corners */
      box-shadow:none;           /* remove soft white glow */
      background:#000;           /* avoids faint seams on bright images */
    }
    /* PATCH-FIGURE-MARGINS */
    .thumb{ margin:0; }          /* <figure> has default margin — kill it */
    .thumbs{ margin:0; }         /* belt-and-braces */

    .hero{ aspect-ratio:16 / 9; }
    .thumbs{ display:grid; grid-template-columns:repeat(3, 1fr); gap:var(--gap); }
    .thumb{ aspect-ratio:16 / 9; }
    figure { margin:0; }        /* default browser margin creates gaps */
    .thumb { margin:0; }        /* belt-and-braces */
    .thumbs{ gap:0; }           /* ensure no grid gap */
    .stack { gap:0; }           /* ensure no stack gap */

    .hero img, .thumb img{
      width:100%; height:100%; object-fit:cover; display:block;
      object-position:center;
      transform:none;
      opacity:1;
    }
    .ready .hero img, .ready .thumb img{ opacity:1; transform:none; }
    @media (prefers-reduced-motion: reduce){
      .hero img, .thumb img{ transition:none }
    }

    /* Seam toolbar (sits on the line between hero and thumbs) */
    .seam{
      position:absolute;
      left:50%;
      bottom:calc(-.5rem); /* dip across the seam */
      translate:-50% 50%;
      background:#fff;
      border:1px solid #e5e5e5;
      border-radius:999px;
      padding:.35rem .5rem;
      display:flex; gap:.25rem;
      box-shadow:0 6px 20px rgba(0,0,0,.08);
      z-index:3;
    }
    .chip{
      border:none; background:#fff; color:#111; font:600 0.9rem/1.1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      padding:.5rem .8rem; border-radius:999px; cursor:pointer;
    }
    .chip:focus-visible{ outline:3px solid var(--ring); outline-offset:2px; }

    /* Expander gap between hero and thumbs (slides thumbs down when opened) */
    /* STEP-04 EXPANDER-TIGHT */
    /* TL-CENTER: panel spans full width and centres */
#panel-timeline{
  grid-column: 1 / -1;   /* span all columns of .expander > .content */
  justify-self: center;  /* centre the panel within the expander grid */
  width: 100%;
}

    .expander{
      overflow:hidden;
      max-height:0;
      padding:0;
      border:0;
      transition:max-height .45s ease, padding .45s ease, border-color .45s ease, background .45s ease;
    }
    .expander.open{
      padding:14px 16px;
      border:1px solid #e8e8e8;
      background:#fafafa;
    }
    .expander > .content{
      display:grid;
      grid-template-columns:1fr 1fr 1fr;
      gap:16px;
      align-items:start;
      font:400 0.95rem/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#333;
    }
    .expander h3{ margin:.2rem 0 .4rem; font-size:1rem }
    .muted{ color:var(--muted) }

    /* Accessibility: keep everything keyboardable */
    a, button{ -webkit-tap-highlight-color:transparent }

    /* Small screens: keep no-scroll guarantee by narrowing inner width (via frame width rule).
       On very narrow phones, reduce gap & text size inside expander. */
/* FIX-3: no gaps on mobile */
@media (max-width:520px){
  :root{ --gap:0 }
  .expander > .content{ grid-template-columns:1fr; gap:10px }
}

    .hero{ position:relative; }

    .seam-overlay{
      position:absolute; left:0; right:0; bottom:-1px;
      display:grid; grid-template-columns:repeat(3,1fr);
      align-items:end; gap:0; padding:0 1.5%;
      z-index:5; pointer-events:none;
    }

    .seam-btn{
      pointer-events:auto;
      margin:0 auto .5rem;
      width:92%;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.65);
      background:rgba(255,255,255,.08);
      backdrop-filter:saturate(120%) blur(2px);
      color:#fff;
      font:600 .95rem/1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      padding:.7rem 1rem;
      text-shadow:0 1px 2px rgba(0,0,0,.35);
    }
    .seam-btn:focus-visible{ outline:3px solid #fff; outline-offset:2px; }
    @media (prefers-reduced-transparency: reduce){
      .seam-btn{ background:#fff; color:#111; text-shadow:none; }
    }
        /* PATCH-TL CSS */
/* TL-ALT CSS (alternating above/below a central line) */
    /* TL-LAYOUT: centre within expander column */
#panel-timeline{ justify-self:center; width:100%; }

.tl-h{ margin:.2rem 0 .8rem; 
      font:600 1rem/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; 
      text-align:center; 
     }

.tl{
  position:relative;
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(140px, 1fr)); /* adjust count if you add items */
  gap:16px;
  justify-content:space-between;    
  justify-items:center;       /* centre each column’s content */
  align-items:center;
  margin-inline:auto;
  max-width:none;
  padding-top:34px;         
}

.tl-line{
  position:absolute; left:0; right:0;
  top:0; height:2px;  /* centre line vertically */
  background:#ddd; border-radius:2px;
}

.tl-item{
  position:relative;
  display:grid;
  grid-template-rows: 14px auto auto;   /* (A) above line, (B) line zone, (C) below line */
  align-items:center;
  justify-items:center;
  gap:8px;
  background:transparent;
  border:none; padding:0; margin:0;
  cursor:pointer; text-align:center;
  /* TL-UX: states */
.tl-item:focus-visible { outline:3px solid #000; outline-offset:4px; border-radius:10px; }
.tl-item:hover .tl-thumb { filter:brightness(1.05); transform:translateY(-1px); transition:transform .2s ease, filter .2s ease; }

}

/* Dot sits in the line zone (row 2), centered horizontally */
.tl-dot{
  grid-row:2; grid-column:1;
  width:10px; height:10px; border-radius:50%;
  background:#111;
  box-shadow:0 0 0 3px #fff inset, 0 0 0 2px #111;
}
    /* TL-UX: active dot */
.tl-dot.active{ 
  background:#0a0a0a; 
  box-shadow:0 0 0 4px #fff inset, 
    0 0 0 3px #000, 
    0 0 0 8px rgba(0,0,0,.08); }


/* TL-FREESIZE: no bars, variable height */
.tl-thumb{
  width:100%;
  height:auto;            /* drop aspect-ratio */
  display:block;
  border-radius:8px;
  box-shadow:0 8px 18px rgba(0,0,0,.08);
}


.tl-date{
  font:500 .9rem/1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:#333;
}

/* Alternate positions:
   Odd items: date ABOVE (row 1), thumb BELOW (row 3).
   Even items: thumb ABOVE (row 1), date BELOW (row 3). */
.tl-item:nth-child(odd)  .tl-date{ grid-row:1; }
.tl-item:nth-child(odd)  .tl-thumb{ grid-row:3; }
.tl-item:nth-child(even) .tl-thumb{ grid-row:1; }
.tl-item:nth-child(even) .tl-date{ grid-row:3; }

/* Small screens: drop to 2 columns but keep alternation */
@media (max-width:520px){
  .tl{
    grid-template-columns:repeat(2, minmax(120px, 1fr));
    gap:10px;
    justify-content: center;   
    max-width:520px;
  }
}

    
    /* Compact on very small widths; keep within expander without page scroll */
    @media (max-width:520px){
      .tl{ grid-template-columns:repeat(2, 1fr); gap:8px; }
      .tl-line{ top:30px; }
      .tl-dot{ top:28px; }
      .tl-thumb{ border-radius:6px; }
    }
#tl-viewer{
  position:fixed; inset:0;
  background:rgba(0,0,0,.9);
  display:grid; place-items:center;
  z-index:999;
}
#tl-viewer img{
  max-width:92vw; max-height:92vh; object-fit:contain;
}
/* Hidden must beat any inline display */
#tl-viewer[hidden]{ display:none !important; }
#tl-viewer{
  position:fixed; inset:0;
  background:rgba(0,0,0,.9);
  display:grid; place-items:center;
  z-index:999;
}
#tl-viewer img{ max-width:92vw; max-height:92vh; object-fit:contain; }
/* must override any display */
#tl-viewer[hidden]{ display:none !important; }

  </style>
</head>
<body>

  <div class="frame ready" id="frame">
    <div class="stack" aria-label="Engagement announcement layout">
      <!-- HERO -->
      <section class="hero" aria-label="Hero photograph">
        <img src="pen.jpg" alt="Alex and Sam just after the proposal in Kyoto" width="1920" height="1080" loading="eager" fetchpriority="high">
        <!-- Seam toolbar placed on the hero’s bottom edge (across the seam) -->
      <!-- PATCH: SEAM OVERLAY -->
      <div class="seam-overlay" role="toolbar" aria-label="More information">
        <button class="seam-btn" data-target="story">Story</button>
        <button class="seam-btn" data-target="timeline">Timeline</button>
        <button class="seam-btn" data-target="details">Details</button>
      </div>
      </section>

      <!-- EXPANDER (animated gap) -->
      <div class="expander" id="expander" aria-live="polite" aria-expanded="false">
        <div class="content" id="expanderContent">
          <!-- Story -->
          <div id="panel-story" hidden>
            <h3>How it happened</h3>
            <p class="muted">A quiet street at golden hour; a simple question; the easiest yes.</p>
          </div>
          <!-- Timeline -->
          <div id="panel-timeline" hidden>
        <!-- PATCH-TL MARKUP -->
          <h3 class="tl-h">Timeline</h3>
          <div class="tl tl-top" id="tl">
            <div class="tl-line" aria-hidden="true"></div>
          
            <!-- ITEM -->
            <button class="tl-item" data-full="pen.jpg">
              <span class="tl-dot" aria-hidden="true"></span>
              <span class="tl-date">2019 · Met</span>
              <img class="tl-thumb" src="pen.jpg" alt="We met" width="320" height="180" loading="lazy">
            </button>
          
            <button class="tl-item" data-full="pen.jpg">
              <span class="tl-dot" aria-hidden="true"></span>
              <span class="tl-date">2021 · First trip</span>
              <img class="tl-thumb" src="pen.jpg" alt="First trip" width="320" height="180" loading="lazy">
            </button>
          
            <button class="tl-item" data-full="pen.jpg">
              <span class="tl-dot" aria-hidden="true"></span>
              <span class="tl-date">2025 · Kyoto</span>
              <img class="tl-thumb" src="pen.jpg" alt="Kyoto" width="320" height="180" loading="lazy">
            </button>
          
            <button class="tl-item" data-full="pen.jpg">
              <span class="tl-dot" aria-hidden="true"></span>
              <span class="tl-date">2025 · The yes</span>
              <img class="tl-thumb" src="pen.jpg" alt="The proposal" width="320" height="180" loading="lazy">
            </button>
          </div>

          </div>
          <!-- Details -->
          <div id="panel-details" hidden>
            <h3>Details</h3>
            <p class="muted">Kyoto, Japan · 12 Aug 2025 · Photo by <span aria-label="photographer name">[Your Photographer]</span></p>
          </div>
        </div>
      </div>

      <!-- THREE 16:9 THUMBS -->
      <section class="thumbs" aria-label="Additional photographs">
        <figure class="thumb"><img src="pen.jpg" alt="Engagement photo 1" width="1280" height="720" loading="lazy"></figure>
        <figure class="thumb"><img src="pen.jpg" alt="Engagement photo 2" width="1280" height="720" loading="lazy"></figure>
        <figure class="thumb"><img src="pen.jpg" alt="Engagement photo 3" width="1280" height="720" loading="lazy"></figure>
      </section>
    </div>
  </div>

<script>
  // ===== Expander wiring =====
  const expander = document.getElementById('expander');
  const content  = document.getElementById('expanderContent');
  const panels   = content ? Array.from(content.children) : [];
  let current = null;

  function openPanel(name){
    if (!expander || !content) return;

    // Hide all, show requested
    panels.forEach(p => p.hidden = true);
    const target = document.getElementById('panel-' + name);
    if (target) target.hidden = false;

    // Open + size to content
    expander.classList.add('open');
    expander.setAttribute('aria-expanded','true');
    requestAnimationFrame(() => {
      expander.style.maxHeight = (content.scrollHeight + 24) + 'px';
    });
  }

  function closePanel(){
    if (!expander) return;
    expander.classList.remove('open');
    expander.setAttribute('aria-expanded','false');
    expander.style.maxHeight = null;
  }

  // Bind seam buttons
  document.querySelectorAll('.seam-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const name = btn.dataset.target;
      if (!name) return;
      if (current === name && expander.classList.contains('open')) { closePanel(); current = null; return; }
      current = name; openPanel(name);
    });
  });

  // Close when clicking outside expander/overlay
  document.addEventListener('click', (e) => {
    const insideOverlay = e.target.closest('.seam-overlay');
    const insideExpander = e.target.closest('#expander');
    if (!insideOverlay && !insideExpander && expander && expander.classList.contains('open')) {
      closePanel(); current = null;
    }
  });
// ===== Timeline lightbox =====
(function(){
  const viewer = document.getElementById('tl-viewer');
  const img    = document.getElementById('tl-viewer-img');

  // All clickable timeline items and their dots
  const items  = Array.from(document.querySelectorAll('.tl-item'));
  const dots   = items.map(it => it.querySelector('.tl-dot'));

  let idx = -1;

  function setActiveDot(i){
    dots.forEach(d => d && d.classList.remove('active'));
    const d = dots[i];
    if (d) d.classList.add('active');
  }

  function openAt(i){
    const el = items[i];
    if (!el || !viewer || !img) return;

    idx = i;
    const src = el.getAttribute('data-full') || el.querySelector('.tl-thumb')?.src;
    img.src = src;

    // show viewer and mark active dot
    viewer.removeAttribute('hidden');
    setActiveDot(i);
  }

  function close(){
    if (!viewer || !img) return;
    viewer.setAttribute('hidden','');
    img.src = '';
    setActiveDot(-1); // clear highlight
  }

  // Click/keyboard on items
  items.forEach((btn, i)=>{
    btn.addEventListener('click', ()=> openAt(i));
    btn.addEventListener('keydown', (e)=> {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openAt(i); }
    });
  });

  // Click outside image closes
  if (viewer){
    viewer.addEventListener('click', (e)=>{
      if (!e.target.closest('#tl-viewer-img')) close();
    });
  }

  // Keyboard nav while open
  document.addEventListener('keydown', (e)=>{
    if (!viewer || viewer.hasAttribute('hidden')) return;
    if (e.key === 'Escape')      return close();
    if (e.key === 'ArrowRight')  return openAt(Math.min(items.length - 1, idx + 1));
    if (e.key === 'ArrowLeft')   return openAt(Math.max(0, idx - 1));
  });
})();

  /* TL VIEWER — hidden by default, shows when JS removes [hidden] */


</script>
  <!-- TL VIEWER (clean, hidden by default) -->
<div id="tl-viewer" hidden>
  <img id="tl-viewer-img" alt="Timeline photo">
</div>


</body>
</html>
